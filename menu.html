<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Coffee - Меню</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2B48C;
            --accent-color: #A0522D;
            --light-color: #F5F5DC;
            --dark-color: #3E2723;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-color);
            color: var(--dark-color);
        }
        
        .navbar {
            background-color: var(--primary-color);
        }
        
        .navbar-brand, .nav-link {
            color: var(--light-color) !important;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--secondary-color) !important;
        }
        
        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        .card {
            border: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            margin-bottom: 20px;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        footer {
            background-color: var(--dark-color);
            color: var(--light-color);
            padding: 40px 0;
        }
        
        .category-badge {
            background-color: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .cart-sidebar {
            position: sticky;
            top: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .cart-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        
        .empty-cart {
            text-align: center;
            padding: 40px 0;
        }
        
        .empty-cart i {
            font-size: 4rem;
            color: #dee2e6;
            margin-bottom: 20px;
        }
        
        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .favorite-btn:hover {
            background: white;
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        
        .favorite-btn.active {
            color: #dc3545;
        }
        
        .card-header {
            position: relative;
            border-bottom: none;
            padding: 20px 20px 0 20px;
        }
        
        .nav-tabs .nav-link {
            color: var(--dark-color) !important;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color) !important;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .favorite-item {
            transition: all 0.3s;
        }
        
        .favorite-item:hover {
            background-color: #f8f9fa;
        }
        
        .card-title-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            padding-right: 50px; /* Оставляем место для кнопки избранного */
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-coffee"></i> Street Coffee
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="menu.html">Меню</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">О нас</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contacts.html">Контакты</a>
                    </li>
<li class="nav-item">
    <a class="nav-link" href="reviews.html">Отзывы</a>
</li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="app" class="container my-5">
        <h1 class="text-center mb-4">Наше меню</h1>
        
        <!-- Вкладки меню и избранного -->
        <ul class="nav nav-tabs mb-4" id="menuTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="menu-tab" data-bs-toggle="tab" data-bs-target="#menu" type="button" role="tab">
                    Меню
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="favorites-tab" data-bs-toggle="tab" data-bs-target="#favorites" type="button" role="tab">
                    <i class="fas fa-heart text-danger"></i> Избранное
                    <span class="badge bg-danger rounded-pill ms-1">{{ favorites.length }}</span>
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="menuTabsContent">
            <!-- Вкладка меню -->
            <div class="tab-pane fade show active" id="menu" role="tabpanel">
                <div class="row">
                    <!-- Основное меню -->
                    <div class="col-lg-8">
                        <!-- Кофе -->
                        <section class="mb-5">
                            <h2 class="section-title">Кофе</h2>
                            <div class="row">
                                <div class="col-md-6" v-for="item in coffeeItems" :key="item.id">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <div class="card-title-container">
                                                <h5 class="card-title">{{ item.name }}</h5>
                                                <span class="category-badge">Кофе</span>
                                            </div>
                                            <button 
                                                class="favorite-btn" 
                                                :class="{ 'active': isFavorite(item.id) }"
                                                @click="toggleFavorite(item)"
                                                :title="isFavorite(item.id) ? 'Удалить из избранного' : 'Добавить в избранное'">
                                                <i class="fas" :class="isFavorite(item.id) ? 'fa-heart' : 'fa-heart'"></i>
                                            </button>
                                            <p class="card-text text-muted">{{ item.description }}</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="h5 mb-0">{{ item.price }} ₽</span>
                                                <button class="btn btn-primary" @click="addToCart(item)">
                                                    В корзину
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Чай -->
                        <section class="mb-5">
                            <h2 class="section-title">Чай</h2>
                            <div class="row">
                                <div class="col-md-6" v-for="item in teaItems" :key="item.id">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <div class="card-title-container">
                                                <h5 class="card-title">{{ item.name }}</h5>
                                                <span class="category-badge">Чай</span>
                                            </div>
                                            <button 
                                                class="favorite-btn" 
                                                :class="{ 'active': isFavorite(item.id) }"
                                                @click="toggleFavorite(item)"
                                                :title="isFavorite(item.id) ? 'Удалить из избранного' : 'Добавить в избранное'">
                                                <i class="fas" :class="isFavorite(item.id) ? 'fa-heart' : 'fa-heart'"></i>
                                            </button>
                                            <p class="card-text text-muted">{{ item.description }}</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="h5 mb-0">{{ item.price }} ₽</span>
                                                <button class="btn btn-primary" @click="addToCart(item)">
                                                    В корзину
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Десерты -->
                        <section class="mb-5">
                            <h2 class="section-title">Десерты</h2>
                            <div class="row">
                                <div class="col-md-6" v-for="item in dessertItems" :key="item.id">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <div class="card-title-container">
                                                <h5 class="card-title">{{ item.name }}</h5>
                                                <span class="category-badge">Десерт</span>
                                            </div>
                                            <button 
                                                class="favorite-btn" 
                                                :class="{ 'active': isFavorite(item.id) }"
                                                @click="toggleFavorite(item)"
                                                :title="isFavorite(item.id) ? 'Удалить из избранного' : 'Добавить в избранное'">
                                                <i class="fas" :class="isFavorite(item.id) ? 'fa-heart' : 'fa-heart'"></i>
                                            </button>
                                            <p class="card-text text-muted">{{ item.description }}</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="h5 mb-0">{{ item.price }} ₽</span>
                                                <button class="btn btn-primary" @click="addToCart(item)">
                                                    В корзину
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Боковая панель корзины -->
                    <div class="col-lg-4">
                        <div class="cart-sidebar">
                            <h4 class="mb-4">
                                <i class="fas fa-shopping-cart"></i> Корзина
                                <span class="badge bg-primary rounded-pill ms-2">{{ cartTotalQuantity }}</span>
                            </h4>
                            
                            <div v-if="cart.length === 0" class="text-center text-muted py-4">
                                <i class="fas fa-coffee fa-2x mb-3"></i>
                                <p>Корзина пуста</p>
                            </div>
                            
                            <div v-else>
                                <div class="cart-items mb-4">
                                    <div class="cart-item" v-for="(item, index) in cart" :key="index">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>{{ item.name }}</strong>
                                                <br>
                                                <small class="text-muted">{{ item.quantity }} × {{ item.price }} ₽</small>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <span class="me-3">{{ item.price * item.quantity }} ₽</span>
                                                <button class="btn btn-sm btn-outline-danger" @click="removeFromCart(index)">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="cart-total mb-4">
                                    <div class="d-flex justify-content-between fw-bold fs-5">
                                        <span>Итого:</span>
                                        <span>{{ totalPrice }} ₽</span>
                                    </div>
                                </div>
                                
                                <button class="btn btn-primary w-100 btn-lg" @click="proceedToCheckout">
                                    <i class="fas fa-credit-card"></i> Перейти к оформлению
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка избранного -->
            <div class="tab-pane fade" id="favorites" role="tabpanel">
                <div class="row">
                    <div class="col-12">
                        <h2 class="section-title">Избранные товары</h2>
                        
                        <div v-if="favorites.length === 0" class="text-center py-5">
                            <i class="fas fa-heart fa-3x text-muted mb-3"></i>
                            <h4 class="text-muted">Нет избранных товаров</h4>
                            <p class="text-muted">Добавьте товары в избранное, нажав на сердечко</p>
                            <button class="btn btn-primary mt-3" data-bs-toggle="tab" data-bs-target="#menu">
                                Перейти к меню
                            </button>
                        </div>
                        
                        <div v-else>
                            <div class="row">
                                <div class="col-md-6 col-lg-4" v-for="item in favorites" :key="item.id">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <div class="card-title-container">
                                                <h5 class="card-title">{{ item.name }}</h5>
                                                <span class="category-badge">{{ getCategoryName(item.id) }}</span>
                                            </div>
                                            <button 
                                                class="favorite-btn active" 
                                                @click="toggleFavorite(item)"
                                                title="Удалить из избранного">
                                                <i class="fas fa-heart"></i>
                                            </button>
                                            <p class="card-text text-muted">{{ item.description }}</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="h5 mb-0">{{ item.price }} ₽</span>
                                                <div>
                                                    <button class="btn btn-primary me-2" @click="addToCart(item)">
                                                        В корзину
                                                    </button>
                                                    <button class="btn btn-outline-danger" @click="toggleFavorite(item)" title="Удалить">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-outline-danger" @click="clearAllFavorites">
                                    <i class="fas fa-trash"></i> Очистить все избранное
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5><i class="fas fa-coffee"></i> Street Coffee</h5>
                    <p>Лучший кофе в городе с доставкой на дом или навынос.</p>
                    <div class="social-links">
                        <a href="#" class="text-light me-3"><i class="fab fa-vk"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <h5>Контакты</h5>
                    <p><i class="fas fa-map-marker-alt"></i> ул. Примерная, 123</p>
                    <p><i class="fas fa-phone"></i> +7 (999) 123-45-67</p>
                    <p><i class="fas fa-envelope"></i> info@streetcoffee.ru</p>
                </div>
                <div class="col-md-4">
                    <h5>Часы работы</h5>
                    <p>Пн-Пт: 8:00 - 22:00</p>
                    <p>Сб-Вс: 9:00 - 23:00</p>
                    <a href="contacts.html" class="btn btn-outline-light">Как добраться</a>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p>&copy; 2023 Street Coffee. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    cart: [],
                    favorites: [],
                    coffeeItems: [
                        { id: 1, name: 'Эспрессо', description: 'Крепкий черный кофе', price: 180 },
                        { id: 2, name: 'Американо', description: 'Эспрессо с горячей водой', price: 200 },
                        { id: 3, name: 'Латте', description: 'Кофе с молоком и молочной пенкой', price: 250 },
                        { id: 4, name: 'Капучино', description: 'Кофе с идеальным соотношением эспрессо, молока и пены', price: 280 },
                        { id: 5, name: 'Раф кофе', description: 'Нежный кофе со сливками и ванилью', price: 300 },
                        { id: 6, name: 'Флэт Уайт', description: 'Кофе с тонким слоем микропены', price: 270 }
                    ],
                    teaItems: [
                        { id: 7, name: 'Черный чай', description: 'Классический черный чай', price: 150 },
                        { id: 8, name: 'Зеленый чай', description: 'Ароматный зеленый чай', price: 150 },
                        { id: 9, name: 'Чай с бергамотом', description: 'Чай Эрл Грей с бергамотом', price: 180 },
                        { id: 10, name: 'Фруктовый чай', description: 'Чай с ягодными и фруктовыми нотами', price: 200 }
                    ],
                    dessertItems: [
                        { id: 11, name: 'Тирамису', description: 'Классический итальянский десерт', price: 320 },
                        { id: 12, name: 'Чизкейк', description: 'Нежный чизкейк Нью-Йорк', price: 280 },
                        { id: 13, name: 'Круассан', description: 'Свежий французский круассан', price: 150 },
                        { id: 14, name: 'Макарон', description: 'Французское пирожное', price: 120 }
                    ]
                }
            },
            computed: {
                cartTotalQuantity() {
                    return this.cart.reduce((total, item) => total + item.quantity, 0);
                },
                totalPrice() {
                    return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                },
                allItems() {
                    return [...this.coffeeItems, ...this.teaItems, ...this.dessertItems];
                }
            },
            methods: {
                // Методы для корзины
                addToCart(product) {
                    const existingItem = this.cart.find(item => item.id === product.id);
                    
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        this.cart.push({
                            ...product,
                            quantity: 1
                        });
                    }
                    
                    this.showNotification(`${product.name} добавлен в корзину`);
                    this.saveCart();
                },
                
                removeFromCart(index) {
                    this.cart.splice(index, 1);
                    this.saveCart();
                    this.showNotification('Товар удален из корзины');
                },
                
                saveCart() {
                    localStorage.setItem('coffeeCart', JSON.stringify(this.cart));
                },
                
                loadCart() {
                    try {
                        const savedCart = localStorage.getItem('coffeeCart');
                        if (savedCart) {
                            this.cart = JSON.parse(savedCart);
                        }
                    } catch (error) {
                        console.error('Ошибка загрузки корзины:', error);
                        this.cart = [];
                    }
                },
                
                proceedToCheckout() {
                    if (this.cart.length === 0) {
                        this.showNotification('Добавьте товары в корзину', 'error');
                        return;
                    }
                    
                    this.saveCart();
                    window.location.href = 'checkout.html';
                },
                
                // Методы для избранного
                toggleFavorite(product) {
                    const index = this.favorites.findIndex(item => item.id === product.id);
                    
                    if (index > -1) {
                        // Удаляем из избранного
                        this.favorites.splice(index, 1);
                        this.showNotification(`${product.name} удален из избранного`);
                    } else {
                        // Добавляем в избранное
                        this.favorites.push({...product});
                        this.showNotification(`${product.name} добавлен в избранное`);
                    }
                    
                    this.saveFavorites();
                },
                
                isFavorite(productId) {
                    return this.favorites.some(item => item.id === productId);
                },
                
                clearAllFavorites() {
                    if (this.favorites.length === 0) return;
                    
                    if (confirm('Вы уверены, что хотите очистить все избранное?')) {
                        this.favorites = [];
                        this.saveFavorites();
                        this.showNotification('Все товары удалены из избранного');
                    }
                },
                
                saveFavorites() {
                    localStorage.setItem('coffeeFavorites', JSON.stringify(this.favorites));
                },
                
                loadFavorites() {
                    try {
                        const savedFavorites = localStorage.getItem('coffeeFavorites');
                        if (savedFavorites) {
                            this.favorites = JSON.parse(savedFavorites);
                        }
                    } catch (error) {
                        console.error('Ошибка загрузки избранного:', error);
                        this.favorites = [];
                    }
                },
                
                getCategoryName(productId) {
                    if (productId <= 6) return 'Кофе';
                    if (productId <= 10) return 'Чай';
                    return 'Десерт';
                },
                
                // Показать уведомление
                showNotification(message, type = 'success') {
                    // Удаляем предыдущие уведомления
                    const existingNotifications = document.querySelectorAll('.custom-notification');
                    existingNotifications.forEach(notification => notification.remove());
                    
                    const alertClass = type === 'error' ? 'alert-danger' : 'alert-success';
                    const iconClass = type === 'error' ? 'fa-exclamation-triangle' : 'fa-check-circle';
                    
                    const notification = document.createElement('div');
                    notification.className = `alert ${alertClass} custom-notification position-fixed top-0 end-0 m-3`;
                    notification.style.zIndex = '1060';
                    notification.innerHTML = `
                        <div class="d-flex align-items-center">
                            <i class="fas ${iconClass} me-2"></i>
                            <span>${message}</span>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 3000);
                }
            },
            mounted() {
                this.loadCart();
                this.loadFavorites();
            }
        }).mount('#app');
    </script>
</body>
</html>