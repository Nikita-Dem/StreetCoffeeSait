<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreetCoffee - –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/checkout.css">
    <style>
        .telegram-success {
            background-color: #0088cc;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
            text-align: center;
        }
        .telegram-success.show {
            display: block;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .loading.show {
            display: block;
        }
        .simple-form {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .form-row .form-group {
            flex: 1;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">
                    <i class="fas fa-coffee"></i>
                    Street<span>Coffee</span>
                </a>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links" id="navLinks">
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="menu.html">–ú–µ–Ω—é</a></li>
                    <li><a href="about.html">–û –Ω–∞—Å</a></li>
                    <li><a href="reviews.html">–û—Ç–∑—ã–≤—ã</a></li>
                    <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    <li>
                        <a href="checkout.html" class="cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count" id="cartCount"></span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="checkout-section">
        <div class="container">
            <h1 class="page-title"><i class="fas fa-shopping-bag"></i> –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
            
            <div class="telegram-success" id="telegramSuccess">
                <i class="fab fa-telegram"></i> –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram! –° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
            </div>
            
            <div class="loading" id="loading">
                <i class="fas fa-spinner fa-spin"></i> –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞...
            </div>
            
            <div class="checkout-container">
                <div class="checkout-content">
                    <div class="simple-form">
                        <div class="order-summary">
                            <h3><i class="fas fa-shopping-cart"></i> –í–∞—à –∑–∞–∫–∞–∑</h3>
                            <div class="order-items" id="checkoutItems">
                                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                            </div>
                            <div class="order-totals">
                                <div class="total-row">
                                    <span>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤:</span>
                                    <span id="subtotalPrice">0 ‚ÇΩ</span>
                                </div>
                                <div class="total-row">
                                    <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                                    <span id="deliveryPrice">0 ‚ÇΩ</span>
                                </div>
                                <div class="total-row final">
                                    <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                                    <span id="totalPrice">0 ‚ÇΩ</span>
                                </div>
                            </div>
                        </div>
                        
                        <h3><i class="fas fa-user"></i> –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h3>
                        
                        <form id="checkoutForm">
                            <div class="form-group">
                                <label for="customerName"><i class="fas fa-user-circle"></i> –ò–º—è *</label>
                                <input type="text" id="customerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="customerPhone"><i class="fas fa-phone"></i> –¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                <input type="tel" id="customerPhone" placeholder="+7 (999) 123-45-67" required>
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-truck"></i> –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è *</label>
                                <div class="delivery-options">
                                    <label class="delivery-option">
                                        <input type="radio" name="deliveryType" value="delivery" checked>
                                        <div class="option-content">
                                            <i class="fas fa-motorcycle"></i>
                                            <span>–î–æ—Å—Ç–∞–≤–∫–∞ (+150 ‚ÇΩ)</span>
                                            <small>–î–æ—Å—Ç–∞–≤–∏–º –≤–∞—à –∑–∞–∫–∞–∑ –ø–æ –∞–¥—Ä–µ—Å—É</small>
                                        </div>
                                    </label>
                                    <label class="delivery-option">
                                        <input type="radio" name="deliveryType" value="pickup">
                                        <div class="option-content">
                                            <i class="fas fa-store"></i>
                                            <span>–°–∞–º–æ–≤—ã–≤–æ–∑ (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)</span>
                                            <small>–ó–∞–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑ –≤ –∫–æ—Ñ–µ–π–Ω–µ</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div id="addressFields">
                                <div class="form-group">
                                    <label for="deliveryAddress"><i class="fas fa-map-marker-alt"></i> –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
                                    <input type="text" id="deliveryAddress" placeholder="—É–ª. –ü—Ä–∏–º–æ—Ä—Å–∫–æ–≥–æ –ö–æ–º—Å–æ–º–æ–ª–∞, 2, –∫–≤. ...">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-clock"></i> –í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è</label>
                                <select id="deliveryTime">
                                    <option value="asap">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
                                    <option value="30-60">–í —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞</option>
                                    <option value="custom">–ù–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="customTimeField" style="display: none;">
                                <label for="customTime">–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è:</label>
                                <input type="text" id="customTime" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 15:30">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-credit-card"></i> –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
                                <div class="payment-options">
                                    <label class="payment-option">
                                        <input type="radio" name="paymentType" value="cash" checked>
                                        <div class="option-content">
                                            <i class="fas fa-money-bill-wave"></i>
                                            <span>–ù–∞–ª–∏—á–Ω—ã–º–∏</span>
                                        </div>
                                    </label>
                                    <label class="payment-option">
                                        <input type="radio" name="paymentType" value="card">
                                        <div class="option-content">
                                            <i class="fas fa-credit-card"></i>
                                            <span>–ö–∞—Ä—Ç–æ–π</span>
                                        </div>
                                    </label>
                                    <label class="payment-option">
                                        <input type="radio" name="paymentType" value="online">
                                        <div class="option-content">
                                            <i class="fas fa-globe"></i>
                                            <span>–û–Ω–ª–∞–π–Ω</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="orderComment"><i class="fas fa-comment"></i> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                                <textarea id="orderComment" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, —ç—Ç–∞–∂, –¥–æ–º–æ—Ñ–æ–Ω –∏ —Ç.–¥." rows="3"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary submit-btn" style="width: 100%; padding: 15px;">
                                <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram
                            </button>
                        </form>
                        
                        <div class="form-actions">
                            <a href="menu.html" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">
                        <i class="fas fa-coffee"></i>
                        Street<span>Coffee</span>
                    </div>
                    <p>–ú—ã —Å–æ–∑–¥–∞–µ–º –ª—É—á—à–∏–π –∫–æ—Ñ–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ü–µ–Ω–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —É–ª–∏—á–Ω—ã—Ö –∫–æ—Ñ–µ–µ–Ω –≤ –ë–æ–ª—å—à–æ–º –ö–∞–º–Ω–µ.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-vk"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="menu.html"><i class="fas fa-utensils"></i> –ú–µ–Ω—é</a></li>
                        <li><a href="about.html"><i class="fas fa-info-circle"></i> –û –Ω–∞—Å</a></li>
                        <li><a href="reviews.html"><i class="fas fa-comments"></i> –û—Ç–∑—ã–≤—ã</a></li>
                        <li><a href="contacts.html"><i class="fas fa-map-marker-alt"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                    <p><i class="fas fa-map-marker-alt"></i> —É–ª. –ü—Ä–∏–º–æ—Ä—Å–∫–æ–≥–æ –ö–æ–º—Å–æ–º–æ–ª–∞, 2, –ë–æ–ª—å—à–æ–π –ö–∞–º–µ–Ω—å</p>
                    <p><i class="fas fa-phone"></i> +7 (423) 456-78-90</p>
                    <p><i class="fas fa-envelope"></i> info@streetcoffee.ru</p>
                    <p><i class="fas fa-clock"></i> –ü–Ω-–í—Å: 7:00-22:00</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 StreetCoffee. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
        const TELEGRAM_BOT_TOKEN = '8229025232:AAGrLS2hUOeaDDgqm4pfwV_Ouh_bU5nx5P8';
        const TELEGRAM_CHAT_ID = '6394893190';
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –≤ Telegram
        async function sendToTelegram(orderData) {
            const message = formatOrderMessage(orderData);
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram
        function formatOrderMessage(orderData) {
            const itemsText = orderData.items.map(item => 
                `‚Ä¢ ${item.name} - ${item.quantity} √ó ${item.price} ‚ÇΩ = ${item.quantity * item.price} ‚ÇΩ`
            ).join('\n');
            
            return `üì¶ <b>–ù–û–í–´–ô –ó–ê–ö–ê–ó!</b>
            
üë§ <b>–ö–ª–∏–µ–Ω—Ç:</b> ${orderData.name}
üì± <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${orderData.phone}
üöö <b>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è:</b> ${orderData.deliveryType === 'delivery' ? '–î–æ—Å—Ç–∞–≤–∫–∞' : '–°–∞–º–æ–≤—ã–≤–æ–∑'}
üìç <b>–ê–¥—Ä–µ—Å:</b> ${orderData.address || '–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –∫–æ—Ñ–µ–π–Ω–∏'}
‚è∞ <b>–í—Ä–µ–º—è:</b> ${orderData.time}
üí≥ <b>–û–ø–ª–∞—Ç–∞:</b> ${getPaymentMethodText(orderData.payment)}
üìù <b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</b> ${orderData.comment || '–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'}

üõí <b>–ó–∞–∫–∞–∑:</b>
${itemsText}

üí∞ <b>–ò—Ç–æ–≥–æ:</b> ${orderData.total} ‚ÇΩ
üìÖ <b>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</b> ${new Date().toLocaleString('ru-RU')}`;
        }
        
        function getPaymentMethodText(payment) {
            switch(payment) {
                case 'cash': return '–ù–∞–ª–∏—á–Ω—ã–º–∏';
                case 'card': return '–ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏';
                case 'online': return '–û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞';
                default: return '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –∏–∑ localStorage
        function loadCart() {
            return JSON.parse(localStorage.getItem('streetcoffee_cart') || '[]');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
        function updateOrderSummary() {
            const cartItems = loadCart();
            const checkoutItems = document.getElementById('checkoutItems');
            const subtotalPrice = document.getElementById('subtotalPrice');
            const totalPrice = document.getElementById('totalPrice');
            
            checkoutItems.innerHTML = '';
            
            if (cartItems.length === 0) {
                checkoutItems.innerHTML = '<p class="empty-cart">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
                subtotalPrice.textContent = '0 ‚ÇΩ';
                totalPrice.textContent = '0 ‚ÇΩ';
                return;
            }
            
            let subtotal = 0;
            
            cartItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'checkout-item';
                itemElement.innerHTML = `
                    <div class="item-info">
                        <span class="item-name">${item.name}</span>
                        <span class="item-quantity">${item.quantity} √ó ${item.price} ‚ÇΩ</span>
                    </div>
                    <span class="item-total">${itemTotal} ‚ÇΩ</span>
                `;
                checkoutItems.appendChild(itemElement);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç–∞–≤–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked').value;
            const deliveryPrice = deliveryType === 'delivery' ? 150 : 0;
            document.getElementById('deliveryPrice').textContent = deliveryPrice + ' ‚ÇΩ';
            
            const total = subtotal + deliveryPrice;
            subtotalPrice.textContent = subtotal + ' ‚ÇΩ';
            totalPrice.textContent = total + ' ‚ÇΩ';
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É
            updateOrderSummary();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            const cartItems = loadCart();
            document.getElementById('cartCount').textContent = cartItems.length;
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ø–æ–ª—è –∞–¥—Ä–µ—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
            const deliveryTypeRadios = document.querySelectorAll('input[name="deliveryType"]');
            const addressFields = document.getElementById('addressFields');
            
            deliveryTypeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'delivery') {
                        addressFields.style.display = 'block';
                        document.getElementById('deliveryAddress').required = true;
                        document.getElementById('deliveryPrice').textContent = '150 ‚ÇΩ';
                    } else {
                        addressFields.style.display = 'none';
                        document.getElementById('deliveryAddress').required = false;
                        document.getElementById('deliveryPrice').textContent = '0 ‚ÇΩ';
                    }
                    updateOrderSummary();
                });
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
            const deliveryTimeSelect = document.getElementById('deliveryTime');
            const customTimeField = document.getElementById('customTimeField');
            
            deliveryTimeSelect.addEventListener('change', function() {
                if (this.value === 'custom') {
                    customTimeField.style.display = 'block';
                } else {
                    customTimeField.style.display = 'none';
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            document.getElementById('checkoutForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ—Ä–∑–∏–Ω–∞ –Ω–µ –ø—É—Å—Ç–∞
                const cartItems = loadCart();
                if (cartItems.length === 0) {
                    alert('–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
                    return;
                }
                
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const formData = {
                    name: document.getElementById('customerName').value.trim(),
                    phone: document.getElementById('customerPhone').value.trim(),
                    deliveryType: document.querySelector('input[name="deliveryType"]:checked').value,
                    address: document.getElementById('deliveryAddress').value.trim(),
                    timeOption: document.getElementById('deliveryTime').value,
                    customTime: document.getElementById('customTime').value.trim(),
                    payment: document.querySelector('input[name="paymentType"]:checked').value,
                    comment: document.getElementById('orderComment').value.trim(),
                    items: cartItems,
                    subtotal: parseInt(document.getElementById('subtotalPrice').textContent),
                    delivery: parseInt(document.getElementById('deliveryPrice').textContent),
                    total: parseInt(document.getElementById('totalPrice').textContent)
                };
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è
                let timeText = '';
                switch(formData.timeOption) {
                    case 'asap':
                        timeText = '–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ';
                        break;
                    case '30-60':
                        timeText = '–í —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞';
                        break;
                    case 'custom':
                        timeText = formData.customTime || '–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ';
                        break;
                }
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const orderData = {
                    name: formData.name,
                    phone: formData.phone,
                    deliveryType: formData.deliveryType,
                    address: formData.deliveryType === 'delivery' ? formData.address : '–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –∫–æ—Ñ–µ–π–Ω–∏',
                    time: timeText,
                    payment: formData.payment,
                    comment: formData.comment,
                    items: formData.items,
                    subtotal: formData.subtotal,
                    delivery: formData.delivery,
                    total: formData.total
                };
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading').classList.add('show');
                
                try {
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                    const success = await sendToTelegram(orderData);
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    document.getElementById('loading').classList.remove('show');
                    
                    if (success) {
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                        document.getElementById('telegramSuccess').classList.add('show');
                        
                        // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
                        localStorage.removeItem('streetcoffee_cart');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                        updateOrderSummary();
                        document.getElementById('cartCount').textContent = '0';
                        
                        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                        document.getElementById('checkoutForm').reset();
                        
                        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ–± —É—Å–ø–µ—Ö–µ
                        document.getElementById('telegramSuccess').scrollIntoView({ behavior: 'smooth' });
                        
                        // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                        setTimeout(() => {
                            document.getElementById('telegramSuccess').classList.remove('show');
                        }, 5000);
                    } else {
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.');
                    }
                } catch (error) {
                    document.getElementById('loading').classList.remove('show');
                    alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                }
            });
        });
    </script>
</body>
</html>